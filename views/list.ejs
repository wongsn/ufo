<%- include('header') %> 

<body>
  
    <table class="table table-hover">
      <thead>
        <tr>
          <th scope = "col">
            <th scope="col"> Actions </th>
            <th scope = "col">DateTime</th>
            <th scope = "col">Summary</th>
            <th scope = "col">Shape</th>
            <th scope = "col">Lat</th>
            <th scope = "col">Long</th>
            <th scope ="col">Country</th>
            <th scope = "col">State</th>
          </th>
          
    </thead>
      <tbody id="data-table-body">
        <%let rowsToBeShown = rows; let currentRow = 0 %>
        <% for (let i=currentRow; i < rowsToBeShown; i++){ %>
          <tr>
            <th scope ="row"><a href="/sightings/<%=i%>"> <%=i+1%></a></th>
            <td scope="row"> Dothis </td>
            <td scope="row"><%=querySet[i].DateTime%> </td>
            <td scope="row"> <%=querySet[i].Summary%> </a></td>
            <td scope="row"> <%=querySet[i].Shape%> </a></td>
            <td scope="row"> <%=querySet[i].lat%> </a></td>
            <td scope="row"> <%=querySet[i].lng%> </a></td>
            <td scope="row"><%=querySet[i].Country%> </a></td>
            <td scope="row"> <%=querySet[i].State%></a></td>
          </tr>
        <%}%>
      </tbody>
    </table>
    <nav aria-label="Page navigation example">
      <ul class="pagination justify-content-center">
        <li class="page-item disabled">
          <a class="page-link" href="#" tabindex="-1">Previous</a>
        </li>
        <li class="page-item"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item"><a class="page-link" href="#">Next</a>
        </li>
      </ul>
    </nav>
  </div>
</div>

<!-- 
<script defer src="/static/list.js"></script> -->

<script>

    //function pagination(querySet, page, rows) {
    //     var trimStart = (page - 1) * rows
    //     var trimEnd = trimStart + rows
    //     var trimmedData = querySet.slice(trimStart, trimEnd)
    //     var pages = Math.round(querySet.length / rows)
    //     var wrapper = document.getElementById('pagination-total')
    //     wrapper.innerHTML = `page of ${pages}` 
    //      return {
    //         'querySet': trimmedData,
    //         'pages': pages,
    //     }
    // }

    // let paginated = pagination(querySet, page, rows) 

function pageButtons(pages) {
    
    var maxLeft = (state.page - Math.floor(state.window / 2))
    var maxRight = (state.page + Math.floor(state.window / 2))

    if (maxLeft < 1) {
        maxLeft = 1
        maxRight = state.window
    }

    if (maxRight > pages) {
        maxLeft = pages - (state.window - 1)
        
        if (maxLeft < 1){
        	maxLeft = 1
        }
        maxRight = pages
    }
    
    if (state.page != 1) {
        document.getElementById('firstpage').innerHTML = `<div class="mdc-button__icon">first_page</div>`;
    }

    if (state.page != pages) {
         document.getElementById('lastpage').innerHTML = `<div class="mdc-button__icon">last_page</div>`;
    }

    const pageEvent = document.querySelector('.mdc-icon-button')
    pageEvent.addEventListener('click', function() {
        document.getElementById('data-table-body').empty()

        state.page = Number($(this).val())

        buildTable()
    })
}
</script>

</body>

<%- include('footer') %> 